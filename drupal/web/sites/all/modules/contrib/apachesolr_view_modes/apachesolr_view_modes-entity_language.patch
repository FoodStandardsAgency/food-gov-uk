From 37df77f545b702181a8967ee0323c28a9432daf9 Mon Sep 17 00:00:00 2001
From: greenman <greenman@codepositive.com>
Date: Thu, 4 Sep 2014 17:01:38 +0100
Subject: [PATCH] solr view modes need to be language aware

---
 .../contrib/apachesolr_view_modes/apachesolr_view_modes.module    | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/docroot/sites/all/modules/contrib/apachesolr_view_modes/apachesolr_view_modes.module b/docroot/sites/all/modules/contrib/apachesolr_view_modes/apachesolr_view_modes.module
index b598369..84c7795 100644
--- a/docroot/sites/all/modules/contrib/apachesolr_view_modes/apachesolr_view_modes.module
+++ b/docroot/sites/all/modules/contrib/apachesolr_view_modes/apachesolr_view_modes.module
@@ -20,8 +20,12 @@ function apachesolr_view_modes_apachesolr_index_document_build(ApacheSolrDocumen
     foreach ($entity_info['view modes'] as $view_mode => $label) {
       // Only index view modes enabled.
       if (in_array($view_mode, $enabled_view_modes)) {
-
-        $build = entity_view($entity_type, $entities, $view_mode);
+        if (isset($entity->$language)) {
+          $langcode = $entity->language;
+        } else {
+          $langcode = NULL;
+        }
+        $build = entity_view($entity_type, $entities, $view_mode, $langcode);
         $build['links']['#access'] = FALSE; // Hide links.
 
         $view_mode_search_result = render($build);
-- 
1.8.0.msysgit.0

